{
  "name": "Mega Jira Workflow",
  "description": "Composite reusable workflow that creates and assigns Jira issues.",
  "trigger": {
    "workflow_dispatch": {
      "inputs": {
        "summary": {
          "description": "Summary for the Jira ticket",
          "required": true,
          "type": "string"
        },
        "description": {
          "description": "Description text",
          "required": true,
          "type": "string"
        },
        "assignee_email": {
          "description": "Email of assignee",
          "required": true,
          "type": "string"
        }
      }
    }
  },
  "secrets": {
    "JIRA_EMAIL": "secrets.JIRA_USER",
    "JIRA_API_TOKEN": "secrets.JIRA_API_TOKEN",
    "JIRA_URL": "secrets.JIRA_BASE_URL"
  },
  "jobs": {
    "create": {
      "name": "Create Jira Issue",
      "uses": "m-nikolovska-mak-system/reusable-actions-library/.github/workflows/create-jira-ticket.yml@main",
      "inputs": {
        "summary": "${{ inputs.summary }}",
        "description": "${{ inputs.description }}"
      },
      "secrets": {
        "JIRA_EMAIL": "${{ secrets.JIRA_USER }}",
        "JIRA_API_TOKEN": "${{ secrets.JIRA_API_TOKEN }}",
        "JIRA_URL": "${{ secrets.JIRA_BASE_URL }}"
      },
      "outputs": {
        "issue_key": "Output propagated from the reusable workflow: create-jira-ticket.yml"
      }
    },
    "assign": {
      "name": "Assign Jira Issue",
      "needs": ["create"],
      "uses": "m-nikolovska-mak-system/reusable-actions-library/.github/workflows/assign-jira-ticket.yml@main",
      "inputs": {
        "issue_key": "${{ needs.create.outputs.issue_key }}",
        "assignee_email": "${{ inputs.assignee_email }}"
      },
      "secrets": {
        "JIRA_EMAIL": "${{ secrets.JIRA_USER }}",
        "JIRA_API_TOKEN": "${{ secrets.JIRA_API_TOKEN }}",
        "JIRA_URL": "${{ secrets.JIRA_BASE_URL }}"
      }
    }
  },
  "metadata": {
    "version": "1.0.0",
    "maintainer": "m-nikolovska-mak-system",
    "category": "jira-automation",
    "tags": ["jira", "automation", "workflow", "reusable", "issue-creation", "assignment"]
  }
}
